<script>
function checkScore(){
  let totalCorrect = 0;

  let score = {
    thai: {correct:0, total:0},
    math: {correct:0, total:0},
    sci: {correct:0, total:0}
  };

  const questions = document.querySelectorAll('.question');

  questions.forEach(q => {
    const answer = q.dataset.answer;
    const subject = q.dataset.subject;
    const selected = q.querySelector('input:checked');
    const feedback = q.querySelector('.feedback');

    score[subject].total++;

    if(!selected){
      feedback.innerHTML = "‚ùó ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö";
      feedback.className = "feedback wrong";
      return;
    }

    if(selected.value === answer){
      totalCorrect++;
      score[subject].correct++;
      feedback.innerHTML = "‚úÖ ‡∏ñ‡∏π‡∏Å";
      feedback.className = "feedback correct";
    }else{
      feedback.innerHTML = "‚ùå ‡∏ú‡∏¥‡∏î (‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠ " + answer + ")";
      feedback.className = "feedback wrong";
    }
  });

  document.getElementById("result").innerHTML = `
    <h3>üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h3>
    üìò ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢: ${score.thai.correct} / ${score.thai.total}<br>
    üìê ‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå: ${score.math.correct} / ${score.math.total}<br>
    üî¨ ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå: ${score.sci.correct} / ${score.sci.total}<br><br>
    ‚úÖ ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${totalCorrect} / ${questions.length}
  `;
}
</script>
